{"version":3,"sources":["src/grid.js"],"names":[],"mappings":"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","file":"src/grid.js","sourcesContent":["/**\n * ECMAScript 2015 (ES6) version of grid.js\n */\n((root, factory) => {\n  root.MSPolymer = factory(root, {});\n}(this /* environment global */, (root, MSPolymer) => {\n\n  class Cell {\n    constructor(i, j) {\n      this.mine = false;\n      this.revealed = false;\n      this.flagged = false;\n      this.risk = 0;\n      this.id = \"cid_\" + i + '_' + j;\n      this.memoizedRevealedVal; // memoized display value\n    }\n\n    revealedVal() {\n      if (this.memoizedRevealedVal !== undefined) {\n        return this.memoizedRevealedVal;\n      } else if(this.mine) {\n        this.memoizedRevealedVal = '*';\n      } else if(this.risk === 0) {\n        this.memoizedRevealedVal = '';\n      } else {\n        this.memoizedRevealedVal = this.risk;\n      }\n      return this.memoizedRevealedVal;\n    }\n\n    color() {\n      if(this.mine) {\n        return '#000';\n      }\n      let color = '';\n      switch(this.risk) {\n        case 1: color = 'blue'; break;\n        case 2: color = 'green'; break;\n        case 3: color = 'red'; break;\n        case 4: color = 'purple'; break;\n        case 5: color = 'maroon'; break;\n        case 6: color = 'turquoise'; break;\n        case 7: color = 'black'; break;\n        case 8: color = 'grey'; break;\n      }\n      return color;\n    }\n  }\n\n  class Grid {\n    constructor(rows, columns, mines) {\n      this.cells = [];\n      this.mineArray = [];\n      this.rows = rows;\n      this.columns = columns;\n      this.mines = mines;\n      \n      // Generate grid of empty Cell Objects\n      for(let i = 0; i < rows; i++) {\n        this.cells[i] = [];\n        for(let j = 0; j < columns; j++) {\n          this.cells[i][j] = new Cell(i, j);\n        }\n      }\n\n      // Seed mines randomly in grid and calculate each cell's risk\n      for(let c = 0; c < mines; c++) {\n        let a = Math.floor(rows * Math.random());\n        let b = Math.floor(columns * Math.random());\n        if (this.cells[a][b].mine === true) {\n          c--;\n          continue;\n        }\n        this.cells[a][b].mine = true;\n        this.mineArray.push(this.cells[a][b].id)\n        let incrementRisk = this.forEachSurroudingCell(a, b);\n        incrementRisk((r, c) => this.cells[r][c].risk += 1);\n      }\n    }\n    \n    /**\n     * A curry helper method that captures the target cell location\n     * in a closure to be used later by the callback(row, column).\n     * The curried method will invoke the callback for each surrounding cell\n     * that is inside the grid.\n     * @param  {number}  row\n     * @param  {number}  col\n     */\n    forEachSurroudingCell(row, col) {\n      /**\n       * Invokes the callback for each neighboring cell that is inside the grid\n       * @param {Function} callback - takes optional (row, column) arguments\n       * @param {Object} context - if no context is passed, it will default to the grid.\n       */\n      return (callback, context = this) => {\n        let isInsideGrid = false;\n        for(let i = -1; i <= 1; i++) {\n          for(let j = -1; j <= 1; j++) {\n            isInsideGrid = (row + i >= 0 && col + j >= 0 && row + i < this.rows && col + j < this.columns);\n            if(isInsideGrid && !(i === 0 && j === 0)) {\n              callback.call(context, row + i, col + j);\n            }\n          }\n        }\n      };\n    }\n\n    /**\n     * Maps and reduces the grid's 2d array using each cell's\n     * `revealed` and `flagged` attributes as counters.\n     * @return {Boolean} - true if rows * columns equals # of revealed cells + # of flagged cells\n     */\n    hasWon() {\n      function counters (p, c) {\n        return { revealed: p.revealed + c.revealed, flagged: p.flagged + c.flagged };\n      }\n      let counters = this.cells\n        .map((row) =>\n          row.map((cell) => {\n            return { revealed: cell.revealed ? 1 : 0, flagged: cell.flagged ? 1 : 0 };\n          })\n          .reduce(counters))\n        .reduce(counters);\n      return this.rows * this.columns === counters.revealed + counters.flagged;\n    }\n  }\n\n  MSPolymer.Grid = Grid;\n\n  return MSPolymer;\n}));\n\n"]}